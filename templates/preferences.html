{% extends "base.html" %}
{% block title %}NutriTech - Set Preferences{% endblock %}

{% block content %}
<div class="container mt-5">
    <div class="row">
        <div class="col-md-8 offset-md-2">
            <div class="card shadow-sm">
                <div class="card-header card-header-custom">
                    <h4 class="mb-0">Your Nutrition & Diet Preferences</h4>
                </div>
                <div class="card-body">
                    <form method="POST">
                        <div class="form-group">
                            <label for="diet_type">Diet Type</label>
                            <select class="form-control" id="diet_type" name="diet_type">
                                <option value="No Restrictions" {% if preferences and preferences.diet_type == "No Restrictions" %}selected{% endif %}>No Restrictions</option>
                                <option value="Vegetarian" {% if preferences and preferences.diet_type == "Vegetarian" %}selected{% endif %}>Vegetarian</option>
                                <option value="Vegan" {% if preferences and preferences.diet_type == "Vegan" %}selected{% endif %}>Vegan</option>
                                <option value="Keto" {% if preferences and preferences.diet_type == "Keto" %}selected{% endif %}>Keto</option>
                                <option value="Paleo" {% if preferences and preferences.diet_type == "Paleo" %}selected{% endif %}>Paleo</option>
                                <option value="Gluten-Free" {% if preferences and preferences.diet_type == "Gluten-Free" %}selected{% endif %}>Gluten-Free</option>
                                <option value="Low-Carb" {% if preferences and preferences.diet_type == "Low-Carb" %}selected{% endif %}>Low-Carb</option>
                                <option value="Mediterranean" {% if preferences and preferences.diet_type == "Mediterranean" %}selected{% endif %}>Mediterranean</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="calorie_target">Daily Calorie Target</label>
                            <input 
                                type="number" 
                                class="form-control" 
                                id="calorie_target" 
                                name="calorie_target" 
                                placeholder="e.g., 2000"
                                value="{{ preferences.calorie_target if preferences else '' }}"
                                required
                            >
                            <small class="form-text text-muted">
                                Recommended daily caloric intake: Men: 2,000-2,500 calories, Women: 1,600-2,000 calories
                            </small>
                        </div>
                        
                        <div class="form-group">
                            <label for="budget">Weekly Grocery Budget (USD)</label>
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">$</span>
                                </div>
                                <input 
                                    type="number" 
                                    class="form-control" 
                                    id="budget" 
                                    name="budget" 
                                    placeholder="e.g., 100"
                                    value="{{ preferences.budget if preferences else '' }}"
                                    required
                                >
                                <div class="input-group-append">
                                    <span class="input-group-text">.00</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="allergies">Allergies or Food Restrictions</label>
                            <textarea 
                                class="form-control" 
                                id="allergies" 
                                name="allergies" 
                                rows="3" 
                                placeholder="e.g., peanuts, shellfish, dairy"
                            >{{ preferences.allergies if preferences else '' }}</textarea>
                            <small class="form-text text-muted">Enter any allergies or food items you want to avoid, separated by commas.</small>
                        </div>
                        
                        <button type="submit" class="btn btn-success-custom btn-block">Save Preferences</button>
                    </form>
                </div>
            </div>
            
            <div class="card shadow-sm mt-4">
                <div class="card-header card-header-custom">
                    <h4 class="mb-0">Understanding Your Nutritional Needs</h4>
                </div>
                <div class="card-body">
                    <p>Setting accurate nutritional preferences is key to getting personalized grocery recommendations that meet your health goals. Here are some tips:</p>
                    
                    <h5>Calorie Targets</h5>
                    <ul>
                        <li>Weight maintenance: Based on your activity level, age, and sex</li>
                        <li>Weight loss: Usually 300-500 calories below maintenance</li>
                        <li>Weight gain: Usually 300-500 calories above maintenance</li>
                    </ul>
                    
                    <h5>Dietary Patterns</h5>
                    <ul>
                        <li><strong>Vegetarian:</strong> Excludes meat but may include dairy and eggs</li>
                        <li><strong>Vegan:</strong> Excludes all animal products</li>
                        <li><strong>Keto:</strong> High fat, low carb (typically under 50g carbs daily)</li>
                        <li><strong>Paleo:</strong> Based on foods presumed to be available to paleolithic humans</li>
                        <li><strong>Gluten-Free:</strong> Avoids wheat, barley, rye, and their derivatives</li>
                    </ul>
                    
                    <h5>Budget Planning</h5>
                    <p>The average weekly grocery budget in the U.S. is approximately $100-150 per person. Adjust based on your financial situation and local food costs.</p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}